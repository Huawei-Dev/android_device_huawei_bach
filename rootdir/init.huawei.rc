on early-init
    mkdir /log 0775 system log

on init
    #for ois test
    chown camera camera /sys/devices/virtual/camerafs/ois/ois_pixel
    chown camera camera /sys/devices/virtual/camerafs/ois/ois_aging
    chown camera camera /sys/devices/virtual/camerafs/ois/ois_icnum
    chown camera camera /sys/devices/virtual/camerafs/ois/ois_check

    chown system system /sys/class/kgsl/kgsl-3d0/idle_timer

    #add for fingerprint
    chmod  0660  /sys/devices/platform/fingerprint/snr
    chown  system  system  /sys/devices/platform/fingerprint/snr

# add for power engine
    mkdir /dev/frz
    mount cgroup none /dev/frz freezer

    restorecon      /sys/class/graphics/fb0/lcd_cabc_mode
    restorecon      /sys/class/hw_power/charger/charge_data/iin_thermal
    restorecon      /sys/devices/qcom,huawei_charger/iin_thermal

on post-fs-data
    chown system system /sys/class/kgsl/kgsl-3d0/devfreq/max_freq
    chmod 0664 /sys/class/kgsl/kgsl-3d0/devfreq/max_freq
    chown system system /sys/class/kgsl/kgsl-3d0/devfreq/min_freq
    chmod 0664 /sys/class/kgsl/kgsl-3d0/devfreq/min_freq

    chown system system /sys/devices/platform/huawei_touch/roi_data
    chown system system /sys/devices/platform/huawei_touch/roi_enable
    chown system system /sys/devices/platform/huawei_touch/roi_data_debug
    chown system system /sys/devices/platform/huawei_touch/touch_chip_info

    #create dir and modify access for speaker calibdata
    mkdir /persist/audio 0774 media media
    chown media media /persist/audio
    chmod 0644 /persist/audio/speaker_calibdata.bin
    chown system system /persist/audio/speaker_calibdata.bin
    chmod 0644 /dev/tfa98xx_calibrate
    chown audioserver audioserver /dev/tfa98xx_calibrate

on boot
    chown system system /sys/set_app_info/set_app_info_node

    chown system system /sys/devices/8789.huawei_hall_sensor/enable_hall_sensor
    chown system system /sys/devices/8789.huawei_hall_sensor/get_hall_status
    chown system system /sys/class/graphics/fb0/inversion_mode
    chown system system /sys/class/graphics/fb0/panel_status
    chown system system /sys/class/graphics/fb0/panel_info
    chown system system /sys/class/graphics/fb0/lcd_inversion_mode
    chown system system /sys/class/graphics/fb0/lcd_check_reg
    chown system system /sys/class/graphics/fb0/lcd_checksum
    chown system system /sys/class/graphics/fb0/lcd_model
    chown system system /sys/class/graphics/fb0/lcd_cabc_mode
    chown system system /sys/class/graphics/fb0/lcd_scan_mode
    chown system system /sys/class/graphics/fb0/lcd_dynamic_checksum
    chown system system /sys/class/graphics/fb0/lcd_ic_color_enhancement_mode
    chown system system /sys/class/graphics/fb0/lcd_sleep_ctrl
    chown system system /sys/class/graphics/fb0/lcd_lp2hs_mipi_check
    chown system system /sys/class/graphics/fb0/lcd_bist_check
    chown system system /sys/class/graphics/fb0/lcd_mipi_detect
    chown system system /sys/class/graphics/fb0/lcd_hkadc
    chown system system /sys/class/graphics/fb0/lcd_voltage_enable
    chown system system /sys/class/graphics/fb0/amoled_pcd_errflag_check
    chown system system /sys/class/graphics/fb0/amoled_acl
    chown system system /sys/class/graphics/fb0/amoled_vr_mode
    chown system system /sys/class/graphics/fb0/amoled_hbm
    chown system system /sys/class/graphics/fb0/lcd_support_mode
    chown system system /sys/class/graphics/fb0/lcd_comform_mode
    chown system system /sys/class/graphics/fb0/lcd_cinema_mode
    chown system system /sys/class/graphics/fb0/lcd_support_checkmode
    chown system system /sys/class/graphics/fb0/led_rg_lcd_color_temperature
    chown system system /sys/class/graphics/fb0/lcd_ce_mode
    chown system system /sys/class/graphics/fb0/effect_al
    chown system system /sys/class/graphics/fb0/effect_ce
    chown system system /sys/class/graphics/fb0/effect_bl
    chown system system /sys/class/graphics/fb0/effect_bl_enable
    chown system system /sys/class/graphics/fb0/effect_metadata
    chown system system /sys/class/graphics/fb0/effect_available
    chown system system /sys/class/graphics/fb0/gamma_dynamic
    chown system system /sys/class/graphics/fb0/2d_sharpness
    chown system system /sys/class/graphics/fb0/lcd_acm_state
    chown system system /sys/class/graphics/fb0/lcd_gmp_state
    chown system system /sys/class/graphics/fb0/sbl_ctrl
    chown system system /sys/class/graphics/fb0/lcd_color_temperature
    chown system system /sys/class/graphics/fb0/frame_count
    chown system system /sys/class/graphics/fb0/frame_update
    chown system system /sys/class/graphics/fb0/mipi_dsi_bit_clk_upt
    chown system system /sys/class/graphics/fb0/lcd_fps_scence
    chown system system /sys/class/graphics/fb0/alpm_function
    chown system system /sys/class/graphics/fb0/alpm_setting
    chown system system /sys/class/graphics/fb0/lcd_func_switch
    chown system system /sys/class/graphics/fb0/lcd_test_config
    chown system system /sys/class/graphics/fb0/lv_detect
    chown system system /sys/class/graphics/fb0/current_detect
    chown system system /sys/class/leds/lcd-backlight/max_brightness

    chown system system /sys/bus/i2c/devices/5-0052/apds9251_als_calibrate
    chown system system /sys/bus/i2c/devices/5-0038/rh1745_als_calibrate
    chown system system /sys/bus/i2c/devices/5-001e/txc_pa2240_calibration
    chown system system /sys/bus/i2c/devices/5-001e/txc_pa2240_calibration_result
    chown system system /sys/bus/i2c/devices/5-0053/avago_apds9110_calibration
    chown media media /sys/bus/platform/drivers/qcom,ois/1b0c000.qcom,cci:qcom,ois@0/ois_pixel
    chown camera camera /sys/bus/platform/drivers/qcom,ois/1b0c000.qcom,cci:qcom,ois@0/check_ois
    chmod 0777 /sys/bus/platform/drivers/qcom,ois/1b0c000.qcom,cci:qcom,ois@0/check_ois
    chown system system /sys/bus/i2c/devices/5-0053/avago_apds9110_calibration_result
    chown system system /sys/touchscreen/glove_func/signal_disparity
    chown system system /sys/touchscreen/holster_touch_window
    chown system system /sys/touchscreen/touch_chip_info
    chown system system /sys/touchscreen/calibrate
    chown system system /sys/touchscreen/calibrate_wakeup_gesture
    chown system system /sys/touchscreen/touch_glove
    chown system system /sys/touchscreen/touch_sensitivity
    chown system system /sys/touchscreen/hand_detect
    chown system system /sys/touchscreen/supported_func_indicater
    chown system system /sys/touchscreen/touch_window
    chown system system /sys/touchscreen/easy_wakeup_gesture
    chown system system /sys/touchscreen/wakeup_gesture_enable
    chown system system /sys/touchscreen/touch_dsm_debug
    chown system system /sys/touchscreen/easy_wakeup_control
    chown system system /sys/touchscreen/easy_wakeup_position
    chown system system /sys/touchscreen/touch_register_operation
    chown system system /sys/touchscreen/tp_capacitance_test_type
    chown system system /sys/touchscreen/touch_rawdata_debug
    chown system system /sys/touchscreen/touch_wideth
    chown system system /sys/touchscreen/roi_enable
    chown system system /sys/touchscreen/roi_data
    chown system system /sys/touchscreen/roi_data_debug
    chown system system /sys/touchscreen/touch_tui_enable
    chown system system /sys/touchscreen/touch_oem_info
    chown system system /sys/touchscreen/calibration_info
    chown system system /sys/touchscreen/tp_capacitance_test_config
    mkdir /data/log/sar_cap
    chown system system /data/log/sar_cap

    chown system system /proc/wifi_built_in/wifi_start
    chown system system /proc/wifi_built_in/mac_addr_hw
    chown system system /proc/wifi_built_in/debug_level_hw

    chmod 0660 /sys/touchscreen/touch_glove
    chmod 0660 /sys/touchscreen/easy_wakeup_gesture
    chmod 0660 /sys/touchscreen/wakeup_gesture_enable

    chown root system /dev/hwlog_jank
    chmod 0662 /dev/hwlog_jank

    chmod 0664 /dev/acm
    chown system system /dev/acm

    chmod 0660 /dev/hwlog_tag
    chown system system /dev/hwlog_tag

    chmod 0662 /dev/hwlog_bdat
    chmod 0660 /dev/hwlog_ptm
    chown root system /dev/hwlog_ptm
    chmod 0660 /dev/bdat

    chmod  0660  /dev/fingerprint
    chown  system  system  /dev/fingerprint
    chmod  0660  /sys/devices/platform/fingerprint/irq
    chown  system  system  /sys/devices/platform/fingerprint/irq
    chmod  0660  /sys/devices/platform/fingerprint/result
    chown  system  system  /sys/devices/platform/fingerprint/result
    chown  system  system  /sys/devices/platform/fingerprint/fingerprint_chip_info
    chmod  0660  /sys/devices/platform/fingerprint/read_image_flag
    chown  system  system  /sys/devices/platform/fingerprint/read_image_flag
    chmod  0660  /sys/devices/platform/fingerprint/nav
    chown  system  system  /sys/devices/platform/fingerprint/nav

    # change the limition below for sensor-hub
    chown system system /sys/devices/soc0/huawei_product
    chmod 0664 /sys/devices/soc0/huawei_product
    chown system system /sys/devices/platform/huawei_tp_color/tp_color_info
    chmod 0664 /sys/devices/platform/huawei_tp_color/tp_color_info

    chown system system /sys/devices/platform/huawei_ts_kit_color/ts_kit_color_info

    chown system system /sys/devices/12c.hw-dev-detect/dev_flag

    chown system system /dev/deviceboxID
    chmod 0660 /dev/deviceboxID
    chown system system /dev/tas_calib
    chmod 0660 /dev/tas_calib

    chown system system /sys/class/leds/torch-light0/brightness
    chown system system /sys/class/leds/torch-light1/brightness
    chmod 0664 /sys/class/leds/torch-light0/brightness
    chmod 0664 /sys/class/leds/torch-light1/brightness

    chown system system /sys/class/hw_power/charger/charge_data/enable_charger
    chmod 0664 /sys/class/hw_power/charger/charge_data/enable_charger
    chown system system /sys/class/hw_power/charger/charge_data/iin_runningtest
    chmod 0664 /sys/class/hw_power/charger/charge_data/iin_runningtest
    chown system system /sys/class/hw_power/charger/charge_data/factory_diag
    chmod 0664 /sys/class/hw_power/charger/charge_data/factory_diag
    chown system system /sys/class/hw_power/charger/charge_data/iin_thermal
    chmod 0664 /sys/class/hw_power/charger/charge_data/iin_thermal
    chown system system /sys/class/hw_power/charger/charge_data/running_test_status
    chmod 0660 /sys/class/hw_power/charger/charge_data/running_test_status
    chown system system /sys/class/hw_power/charger/charge_data/update_volt_now
    chmod 0660 /sys/class/hw_power/charger/charge_data/update_volt_now
    chown system system /sys/class/hw_power/charger/charge_data/enable_hiz
    chmod 0664 /sys/class/hw_power/charger/charge_data/enable_hiz
    chown system system /sys/class/hw_power/charger/charge_data/iin_rt_current
    chmod 0664 /sys/class/hw_power/charger/charge_data/iin_rt_current
    chown system system /sys/class/hw_power/charger/charge_data/prop_current_limit
    chmod 0664 /sys/class/hw_power/charger/charge_data/prop_current_limit

    restorecon /sys/class/hw_power/charger/charge_data/running_test_status
    restorecon /sys/class/hw_power/charger/charge_data/enable_charger
    restorecon /sys/class/hw_power/charger/charge_data/iin_runningtest
    restorecon /sys/class/hw_power/charger/charge_data/factory_diag
    restorecon /sys/class/hw_power/charger/charge_data/iin_thermal
    restorecon /sys/class/hw_power/charger/charge_data/update_volt_now
    restorecon /sys/class/hw_power/charger/charge_data/enable_hiz
    restorecon /sys/class/hw_power/charger/charge_data/iin_rt_current
    restorecon /sys/class/hw_power/charger/charge_data/prop_current_limit

#Hw Power and Thermal Monitor
    chown system system /sys/power/monitor/ap_sleep
    chmod 0644 /sys/power/monitor/ap_sleep
    chown system system /sys/power/monitor/modem_sleep
    chmod 0644 /sys/power/monitor/modem_sleep
    chown system system /sys/power/monitor/suspend_failed
    chmod 0644 /sys/power/monitor/suspend_failed
    chown system system /sys/power/monitor/freezing_failed
    chmod 0644 /sys/power/monitor/freezing_failed
    chown system system /sys/power/monitor/wakeup_abnormal
    chmod 0644 /sys/power/monitor/wakeup_abnormal
    chown system system /sys/power/monitor/driver_abnormal
    chmod 0644 /sys/power/monitor/driver_abnormal
    chown system system /sys/power/monitor/wakeup_irq
    chmod 0644 /sys/power/monitor/wakeup_irq
    chown system system /sys/power/monitor/wakeup_gpio
    chmod 0644 /sys/power/monitor/wakeup_gpio

    chmod 0664 /sys/class/power_supply/bms/chg_cycle_count
    chown system system /sys/class/power_supply/bms/chg_cycle_count
    chmod 0660 /sys/class/power_supply/bms/reset_learned_cc
    chown system system /sys/class/power_supply/bms/reset_learned_cc
    chmod 0660 /sys/class/power_supply/battery/voltage_max
    chown system system /sys/class/power_supply/battery/voltage_max
    chmod 0660 /sys/class/power_supply/battery/constant_charge_current_max
    chown system system /sys/class/power_supply/battery/constant_charge_current_max
    mkdir /persist/charger
    chmod 0775 /persist/charger
    chown system system /persist/charger

on property:bluetooth.log.file.create=true
    mkdir /data/log/bt
    chown bluetooth bluetooth /data/log/bt
    chmod 775 /data/log/bt
    setprop bluetooth.log.file.create false

service macaddr /vendor/bin/mac_addr_normalization
    class late_start
    user root
    group root bluetooth wifi
    oneshot

service teecd /vendor/bin/teecd
    class core
    user system
    group system

service oeminfo_nvm /vendor/bin/oeminfo_nvm_server
    class core
    user root
